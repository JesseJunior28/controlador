{% extends 'ocorrencia/modelo.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block conteudo %}

<div class="container mt-3">
    

    <div class="row mt-3">
        <div class="col">

            <h2 class="mb-4">Informações do Plantão</h2>

        </div>
    </div>

    <div class="row mt-2 mb-2">
        <div class="col-4 ">
            

            <div class="d-flex justify-content-between align-items-start mb-2">
                <span><strong>NOME DO CONTROLADOR:</strong></span>
                <span>Jessé Júnior</span>
            </div>

            <div class="d-flex justify-content-between align-items-start mb-2">
                <span><strong>TIPO DE ACESSO:</strong></span>
                <span>coi</span>
            </div>

            

            <div class="d-flex justify-content-between align-items-start">
                <span><strong>OCORRÊNCIAS EM ABERTO:</strong></span>
                <span>0</span>
            </div>
        </div>
        

        <div class="col-4">
            <div class="d-flex justify-content-between align-items-start mb-2">
                <span><strong>DATA/HORA DE INÍCIO:</strong></span>
                <span>25/03/2025, 11:06:39</span>
            </div>

            <div class="d-flex justify-content-between align-items-start mb-2">
                <span><strong>TURNO DO PLANTÃO:</strong></span>
                <span>DIÚRNO</span>
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col">

            <h2>Listagem de Ocorrências</h2>

        </div>
    </div>

    <div class="row mb-4">
    <div class="col text-right">
        <a href="{% url 'cadastrar_ocorrencia' %}" class="btn btn-primary">Cadastrar Ocorrência</a> 
    </div>
    </div>

    <div class="row">
    <div class="col">

    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Criticidade</th>
                <th>Unidade</th>
                <th>Título</th>
                <th>Local</th>
                <th>Status da Ocorrência</th>
                <th>Data de abertura</th>
                <th>Data de Encerramento</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for ocorrencia in ocorrencias %}
                <tr>
                    <td>{{ ocorrencia.id|default:"" }}</td>
                    <td>{{ ocorrencia.criticidade|default:"" }}</td>  
                    <td>{{ ocorrencia.titulo|default:"" }}</td>  
                    <td>{{ ocorrencia.local|default:"Sem OS" }}</td>
                    <td>{{ ocorrencia.data_abertura|date:"d/m/Y"|default:"" }}</td>  
                    <td>{{ ocorrencia.data_encerramento|default:"" }}</td>  
                    <td>{{ ocorrencia.status|default:"" }}</td> 
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="10">Nenhuma ocorrência cadastrada.</td>  
                </tr>
            {% endfor %}
        </tbody>
    </table>


    </div>
    </div>
</div>

{% endblock %}